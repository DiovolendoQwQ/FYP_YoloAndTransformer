# 2025-11-27

- 运行概况：
  - 模式：双模型统一输出（`--dual_out`）
  - 根目录：`exp/2025-11-27_2模型训练_第1次训练`
  - 数据：`datasets/runtime_coco128.yaml`（`--dataset_root f:/Project/FYP_YoloAndTransformer/datasets`）
  - 设备：`CUDA:0`
  - 训练：`epochs=200`，`imgsz=640`，`batch=16`
  - 验证：`conf=0.205`，`iou=0.6`

- YOLO（yolov8n，最后一轮 epoch=200）：
  - Precision(B)≈0.922、Recall(B)≈0.852、mAP50(B)≈0.919、mAP50-95(B)≈0.784
  - 验证损失：box≈0.634、cls≈0.463、dfl≈0.881
  - 文件：`exp/2025-11-27_2模型训练_第1次训练/yolo_epoch200/weights/{best.pt,last.pt}`、`results.csv`、`results.png`
  - 验证目录：`exp/2025-11-27_2模型训练_第1次训练/yolo_epoch200_val/`（含 `BoxPR/P/R/F1_curve.png`、`confusion_matrix*.png`、`predictions.json`）

- YOLO+Transform（最后一轮 epoch=200）：
  - Precision(B)≈0.897、Recall(B)≈0.836、mAP50(B)≈0.898、mAP50-95(B)≈0.690
  - 验证损失：box≈0.887、cls≈0.715、dfl≈1.148
  - 文件：`exp/2025-11-27_2模型训练_第1次训练/yolo+transform_epoch200/weights/{best.pt,last.pt}`、`results.csv`、`results.png`
  - 验证目录：`exp/2025-11-27_2模型训练_第1次训练/yolo+transform_epoch200_val/`（含同类曲线与矩阵文件）

- 对比曲线（统一根目录）：
  - `compare_train_box_loss.png / compare_val_box_loss.png`
  - `compare_train_cls_loss.png / compare_val_cls_loss.png`
  - `compare_train_dfl_loss.png / compare_val_dfl_loss.png`

- 结论：
  - 在 `coco128` 小数据上，YOLO 基线在 mAP50-95、mAP50 与验证损失均优于注意力版本；建议在更大数据集与更高分辨率上重试 Transformer，并细调 `heads/dropout/residual_scale` 与插入层位。

## 50轮双模型试验（第2次训练）

- 运行：`conda activate yolo-cuda && python scripts/inject_cbam_yolov8.py --attn transformer --epochs 50 --batch 16 --imgsz 640 --device 0 --dataset_root f:/Project/FYP_YoloAndTransformer/datasets --dual_out`
- 根目录：`exp/2025-11-27_2模型训练_第2次训练`
- YOLO（最后一轮 epoch=50）：
  - Precision(B)≈`0.7976`、Recall(B)≈`0.7837`、mAP50(B)≈`0.8363`、mAP50-95(B)≈`0.6648`
  - 验证损失：box≈`0.8459`、cls≈`0.6560`、dfl≈`0.9776`
  - 文件：`yolo_epoch50/weights/{best.pt,last.pt}`、`results.csv`、`results.png`、PR/F1/混淆矩阵与 `val_batch*_pred.jpg`
- YOLO+Transform（最后一轮 epoch=50）：
  - Precision(B)≈`0.6791`、Recall(B)≈`0.6503`、mAP50(B)≈`0.7240`、mAP50-95(B)≈`0.4644`
  - 验证损失：box≈`1.3256`、cls≈`1.1697`、dfl≈`1.5386`
  - 文件：`yolo+transform_epoch50/weights/{best.pt,last.pt}`、`results.csv`（训练可视化已生成，验证曲线持续生成）
- 对比：本轮在小数据与 50 轮设置下，基线总体优于注意力版本；建议在更大数据、更高分辨率与更长训练中重试，并配合两阶段推理解耦训练压力。
